# Документация проекта Proriv UZ Vue Admin

## Обзор проекта

**Proriv UZ Vue Admin** — административная панель, построенная на Vue 3 с использованием современного стека технологий. Проект представляет собой SPA (Single Page Application) для управления образовательными программами и пользователями.

## Используемые технологии

### Основной стек

- **Vue 3.5.22** — прогрессивный JavaScript-фреймворк для создания пользовательских интерфейсов
- **Vite 7.1.7** — быстрый инструмент сборки и dev-сервер
- **Vue Router 4.6.3** — официальный маршрутизатор для Vue.js
- **Pinia 3.0.3** — официальная библиотека управления состоянием для Vue
- **Axios 1.13.2** — HTTP-клиент для работы с API
- **Element Plus 2.11.5** — UI-библиотека компонентов для Vue 3

### Инструменты разработки

- **@vitejs/plugin-vue 6.0.1** — плагин Vite для поддержки Vue
- **vite-plugin-vue-devtools 8.0.2** — инструменты разработчика Vue
- **vite-svg-loader 5.1.0** — загрузчик SVG-файлов как Vue-компонентов
- **Sass 1.93.2** — препроцессор CSS

### Требования к окружению

- **Node.js**: ^20.19.0 || >=22.12.0

## Структура проекта

```
proriv-uz-vue-admin/
├── public/                    # Статические файлы
│   └── favicon.ico           # Иконка сайта
├── src/                      # Исходный код приложения
│   ├── assets/              # Ресурсы (стили, иконки)
│   │   ├── icons/           # SVG-иконки
│   │   │   ├── access.svg
│   │   │   ├── club.svg
│   │   │   ├── events.svg
│   │   │   ├── evolution.svg
│   │   │   ├── leads.svg
│   │   │   ├── lp.svg
│   │   │   └── proriv.svg
│   │   └── styles/          # SCSS стили
│   │       ├── _reset.scss  # Сброс стилей
│   │       ├── _sidebar.scss # Стили боковой панели
│   │       ├── _tables.scss  # Стили таблиц
│   │       ├── _vars.scss    # CSS-переменные
│   │       └── global.scss   # Глобальные стили
│   ├── components/          # Переиспользуемые компоненты
│   │   ├── CreateLeadershipModal.vue
│   │   ├── EditGroup.vue
│   │   └── Sidebar.vue      # Боковая панель навигации
│   ├── lib/                 # Утилиты и библиотеки
│   │   └── http.js          # Настройка Axios с interceptors
│   ├── router/              # Конфигурация маршрутизации
│   │   └── index.js         # Автоматическая генерация роутов из views
│   ├── services/            # Сервисы для работы с API
│   │   └── api.js           # API-клиент (legacy)
│   ├── stores/              # Pinia stores (управление состоянием)
│   │   └── auth.js          # Store для аутентификации
│   ├── views/               # Страницы приложения
│   │   ├── evolution/       # Страница "Эволюция"
│   │   │   └── index.vue
│   │   ├── lp/              # Лидерская программа
│   │   │   ├── [id].vue     # Динамический роут для детальной страницы
│   │   │   └── index.vue    # Список программ
│   │   ├── sign/            # Страницы авторизации
│   │   │   └── in.vue       # Страница входа
│   │   ├── index.vue        # Главная страница
│   │   └── profile.vue      # Профиль пользователя
│   ├── App.vue              # Корневой компонент
│   └── main.js              # Точка входа приложения
├── index.html               # HTML-шаблон
├── jsconfig.json            # Конфигурация JavaScript/TypeScript
├── package.json             # Зависимости и скрипты
├── vite.config.js           # Конфигурация Vite
└── README.md                # Базовая документация
```

## Архитектура приложения

### Точка входа (main.js)

Приложение инициализируется в `main.js`:
- Создание экземпляра Vue приложения
- Подключение Pinia для управления состоянием
- Настройка Vue Router
- Инициализация Element Plus с русской локализацией
- Загрузка глобальных стилей
- Инициализация аутентификации перед монтированием приложения

### Маршрутизация (router/index.js)

Роутер использует **автоматическую генерацию маршрутов** на основе структуры папки `views`:
- Файлы `index.vue` преобразуются в корневые маршруты папки
- Файлы `[id].vue` создают динамические параметры (`:id`)
- Файлы `[...all].vue` создают catch-all роуты
- Публичные маршруты (например, `/sign/in`) обрабатываются отдельно
- Настроена защита маршрутов через `beforeEach` guard

**Особенности:**
- Автоматическое создание роутов из файловой структуры
- Защита приватных маршрутов
- Редирект неавторизованных пользователей на страницу входа
- Редирект авторизованных пользователей с `/sign/in` на главную

### Управление состоянием (stores/auth.js)

Используется Pinia для управления состоянием аутентификации:

**Функционал:**
- Хранение токена доступа в localStorage
- Загрузка и валидация токена при старте приложения
- Получение данных пользователя с сервера
- Выход из системы с очисткой данных
- Автоматическая подстановка токена в заголовки HTTP-запросов

**Методы:**
- `setToken(token)` — установка токена
- `loadToken()` — загрузка токена из localStorage
- `fetchUser()` — получение данных пользователя
- `logout()` — выход из системы

### HTTP-клиент (lib/http.js)

Централизованная настройка Axios:

**Функционал:**
- Настройка базового URL через переменную окружения `VITE_API_BASE`
- Автоматическая подстановка токена авторизации
- Перехватчики ответов для обработки ошибок:
  - 401 — автоматическая очистка токена и уведомление пользователя
  - Отображение сообщений об ошибках через Element Plus
- Настройка таймаутов и заголовков по умолчанию

**Переменные окружения:**
- `VITE_API_BASE` — базовый URL API (например, `192.168.1.6:8000/api/v1`)

### Компоненты

#### Sidebar.vue
Боковая панель навигации с пунктами меню:
- Лидерская программа (`/lp`)
- Эволюция (`/evolution`)
- Прорыв (`/proriv`)
- Заявки (`/leads`)
- Открыть доступ (`/access`)
- События (`/events`)
- GrowUp Club (`/club`)
- Профиль (`/profile`)

Использует SVG-иконки, загружаемые через `vite-svg-loader`.

### Стилизация

Проект использует **SCSS** с модульной структурой:

- `_vars.scss` — CSS-переменные (цвета, отступы)
- `_reset.scss` — сброс стилей браузера
- `_sidebar.scss` — стили боковой панели
- `_tables.scss` — стили таблиц
- `global.scss` — глобальные стили и подключение шрифтов

**Особенности:**
- Использование шрифта Inter от Google Fonts
- CSS-переменные для цветовой схемы
- SCSS-переменные автоматически доступны во всех компонентах через настройку Vite
- Миксины для переиспользования стилей (например, `@mixin card`)

### Конфигурация Vite (vite.config.js)

**Настройки:**
- Плагин Vue для обработки `.vue` файлов
- Vue DevTools для разработки
- SVG Loader для импорта SVG как компонентов
- Алиас `@` для пути `./src`
- Автоматическое подключение SCSS-переменных во все компоненты

## Скрипты проекта

```bash
npm run dev      # Запуск dev-сервера с hot-reload (--host для доступа из сети)
npm run build    # Сборка production-версии
npm run preview  # Предпросмотр production-сборки
```

## Аутентификация

Приложение использует **JWT (JSON Web Token)** для аутентификации:

1. Токен хранится в `localStorage` под ключом `access_token`
2. Токен автоматически добавляется в заголовок `Authorization: Bearer <token>`
3. При получении 401 ошибки токен автоматически очищается
4. Защищенные маршруты требуют наличия валидного токена

## API Integration

API-запросы настраиваются через:
- `lib/http.js` — основной HTTP-клиент (рекомендуется)
- `services/api.js` — legacy API-клиент

Базовый URL API настраивается через переменную окружения `VITE_API_BASE`.

## Особенности реализации

1. **Автоматическая генерация роутов** — маршруты создаются автоматически на основе структуры папки `views`
2. **File-based routing** — структура файлов определяет структуру URL
3. **Динамические параметры** — поддерживаются через синтаксис `[param].vue`
4. **Защита маршрутов** — навигационный guard проверяет аутентификацию
5. **Централизованная обработка ошибок** — HTTP-перехватчики обрабатывают ошибки глобально
6. **SVG как компоненты** — иконки импортируются как Vue-компоненты

## Переменные окружения

Создайте файл `.env` в корне проекта:

```env
VITE_API_BASE=192.168.1.6:8000/api/v1
```

Или для полного URL:
```env
VITE_API_BASE=http://192.168.1.6:8000/api/v1
```

## Зависимости

### Production
- `vue` — фреймворк
- `vue-router` — маршрутизация
- `pinia` — управление состоянием
- `axios` — HTTP-клиент
- `element-plus` — UI-компоненты

### Development
- `vite` — сборщик
- `@vitejs/plugin-vue` — плагин Vue для Vite
- `sass` — препроцессор CSS
- `vite-plugin-vue-devtools` — инструменты разработчика
- `vite-svg-loader` — загрузчик SVG

## Рекомендации по разработке

1. Используйте Composition API (`<script setup>`) для новых компонентов
2. Храните состояние в Pinia stores
3. Используйте `lib/http.js` для всех API-запросов
4. Следуйте структуре папок для автоматической генерации роутов
5. Используйте SCSS-переменные из `_vars.scss` для стилизации
6. Импортируйте SVG-иконки через `vite-svg-loader`

